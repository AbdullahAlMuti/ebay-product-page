<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Template Visual Editor</title>
  <link rel="stylesheet" href="assets/editor.css">
</head>
<body>
  <header class="app-header">
    <div class="brand">ALMUTI LLC eBay Product Editor</div>
    <div class="header-actions">
      <div class="group">
        <label class="accent-control"><span>Accent</span><input id="accent-color" type="color" value="#16a34a"></label>
        <button id="btn-dark" class="btn" title="Toggle dark mode">Dark</button>
        <button id="btn-export-safe" class="btn" title="Sanitize and download eBay-safe HTML">Export eBay Safe</button>
        <button id="btn-reset-all" class="btn" title="Reset theme, zoom, layout and panels">Reset</button>
      </div>
      <button id="btn-copy" class="btn primary" title="Copy edited HTML">Copy HTML</button>
      <button id="btn-download" class="btn" title="Download edited HTML">Download</button>
      <button id="btn-save" class="btn" title="Save to Templates">Save</button>
    </div>
  </header>

  <div class="app">
    <aside class="sidebar">
      <div class="section">
        <div class="section-title">Templates</div>
        <div class="stack">
          <select id="template-list" class="select"><option value="__default">--Select_Template--</option>
          
            <option value="template.html">template.html</option>
            <option value="template2.html">template2.html</option>
          
          </select>

          <div class="row">
            <button id="btn-new" class="btn">New Blank</button>
            <button id="btn-delete" class="btn danger">Delete</button>
          </div>
          <input id="file-input" type="file" accept=".html,.htm" class="file-input">
          <button id="btn-upload" class="btn">Upload HTML</button>
          <button id="btn-import-clipboard" class="btn">Import from Clipboard</button>
        </div>
      </div>

      <details class="section panel collapse" id="history-panel">
        <summary><div class="panel-title">History</div></summary>
        <div class="panel-body">
          <div class="row">
            <select id="history-list" class="select" style="flex:1"></select>
          </div>
          <div class="btn-group">
            <button id="btn-history-snapshot" class="btn">Snapshot</button>
            <button id="btn-history-restore" class="btn">Restore Selected</button>
            <button id="btn-history-delete" class="btn danger">Delete Selected</button>
            <label class="row" style="gap:6px"><input type="checkbox" id="history-auto"> Auto</label>
          </div>
          <small>Snapshots save the current edited state. Reset always returns to the base template.</small>
        </div>
      </details>

      <div class="section">
        <div class="section-title">Formatting</div>
        <div class="toolbar">
          <button data-cmd="undo" class="btn">Undo</button>
          <button data-cmd="redo" class="btn">Redo</button>
          <button data-cmd="bold" class="btn">B</button>
          <button data-cmd="italic" class="btn">I</button>
          <button data-cmd="underline" class="btn">U</button>
          <button data-cmd="insertUnorderedList" class="btn">â€¢ List</button>
          <button data-cmd="justifyLeft" class="btn">Align L</button>
          <button data-cmd="justifyCenter" class="btn">Align C</button>
          <button data-cmd="justifyRight" class="btn">Align R</button>
          <label class="color">
            <span>Text</span>
            <input type="color" id="color-text">
          </label>
          <label class="color">
            <span>BG</span>
            <input type="color" id="color-bg">
          </label>
          <div class="row">
            <button id="btn-h1" class="btn">H1</button>
            <button id="btn-h2" class="btn">H2</button>
            <button id="btn-p" class="btn">P</button>
          </div>
        </div>
      </div>

      <div class="section">
        <div class="section-title">Images</div>
        <div class="stack">
          <div class="row">
            <button id="btn-replace-img" class="btn">Replace Selected Image</button>
            <button id="btn-delete-img" class="btn danger" title="Delete the selected image from the template">Delete Selected Image</button>
          </div>
          <input id="img-file" type="file" accept="image/*" class="file-input">
          <div class="row">
            <input id="img-url" type="url" placeholder="https://example.com/image.jpg" class="file-input" style="flex:1">
            <button id="btn-set-img-url" class="btn">Set Image URL</button>
          </div>
          <small>Select an image inside the preview, then click replace.</small>
          <hr>
          <details id="adv-img" class="collapse">
            <summary>Advanced</summary>
            <div class="stack">
            <div class="row">
              <label style="width:70px">Alt</label>
              <input id="img-alt" type="text" placeholder="Alternative text" class="file-input" style="flex:1">
            </div>
            <div class="row">
              <label style="width:70px">Mode</label>
              <select id="img-size-mode" class="select" style="flex:1">
                <option value="preserve">Preserve current size</option>
                <option value="width">Set width, keep ratio</option>
                <option value="height">Set height, keep ratio</option>
                <option value="natural">Use natural size</option>
              </select>
            </div>
            <div class="row">
              <label style="width:70px">W</label>
              <input id="img-w" type="number" min="1" step="1" placeholder="px" class="file-input" style="width:110px">
              <label style="width:40px">H</label>
              <input id="img-h" type="number" min="1" step="1" placeholder="px" class="file-input" style="width:110px">
              <label class="row" style="gap:6px"><input type="checkbox" id="img-lock"> Lock ratio</label>
            </div>
            <div class="row">
              <label style="width:70px">Fit</label>
              <select id="img-fit" class="select" style="flex:1">
                <option value="cover">cover</option>
                <option value="contain">contain</option>
                <option value="fill">fill</option>
                <option value="none">none</option>
                <option value="scale-down">scale-down</option>
              </select>
            </div>
            <div class="row">
              <label style="width:70px">Pos</label>
              <select id="img-pos" class="select" style="flex:1">
                <option>center center</option>
                <option>top left</option>
                <option>top center</option>
                <option>top right</option>
                <option>center left</option>
                <option>center right</option>
                <option>bottom left</option>
                <option>bottom center</option>
                <option>bottom right</option>
              </select>
            </div>
            <div class="row">
              <button id="btn-apply-img" class="btn primary">Apply</button>
              <button id="btn-reset-img" class="btn">Reset</button>
              <button id="btn-apply-all-img" class="btn">Apply to All Similar</button>
            </div>
            </div>
          </details>
        </div>
      </div>

      <details class="section panel collapse" id="ai-assistant">
        <summary><div class="panel-title">AI Assistant (Gemini) <span class="badge">Live</span></div></summary>
        <div class="panel-body">
          <div class="row">
            <input id="ai-key" type="password" placeholder="Gemini API Key" class="file-input" style="flex:1">
            <label class="row" style="gap:6px"><input type="checkbox" id="ai-remember"> Remember</label>
          </div>
          <div class="row">
            <label style="width:70px">Model</label>
            <select id="ai-model" class="select" style="flex:1">
              <option value="gemini-1.5-flash">gemini-1.5-flash</option>
              <option value="gemini-1.5-pro">gemini-1.5-pro</option>
            </select>
          </div>
          <textarea id="ai-prompt" class="input-lg" rows="4" placeholder="Ask the AI... e.g., Rewrite the selected text in a more persuasive, concise tone for eBay."></textarea>
          <div class="btn-group">
            <button id="btn-ai-run" class="btn primary">Run</button>
            <button id="btn-ai-insert" class="btn">Insert into Selection</button>
            <button id="btn-ai-rewrite" class="btn">Rewrite Selection</button>
            <button id="btn-ai-bullets" class="btn">Bullet Points</button>
            <button id="btn-ai-alt" class="btn">ALT for Image</button>
            <button id="btn-ai-copy" class="btn">Copy Output</button>
          </div>
          <textarea id="ai-output" class="output" rows="5" placeholder="AI output will appear here..."></textarea>
        </div>
      </details>

      <details class="section panel collapse" id="ai-writer">
        <summary><div class="panel-title">AI Writer Pro</div></summary>
        <div class="panel-body">
          <div class="row">
            <label style="width:70px">Tone</label>
            <select id="ai-tone" class="select" style="flex:1">
              <option>Concise</option>
              <option>Persuasive</option>
              <option>Professional</option>
              <option>Friendly</option>
              <option>Technical</option>
            </select>
          </div>
          <div class="row">
            <label style="width:70px">Goal</label>
            <select id="ai-goal" class="select" style="flex:1">
              <option value="bullets">Key Bullet Points</option>
              <option value="desc">Product Description</option>
              <option value="title">Optimized Title</option>
              <option value="faq">FAQ Entries</option>
              <option value="meta">SEO Meta</option>
            </select>
          </div>
          <textarea id="ai-source" class="input-lg" rows="4" placeholder="Paste specs or product info; empty uses selection"></textarea>
          <div class="btn-group">
            <button id="btn-ai-generate" class="btn primary">Generate</button>
            <button id="btn-ai-apply" class="btn">Insert/Replace</button>
          </div>
          <textarea id="ai-result" class="output" rows="6" placeholder="Generated content..."></textarea>
        </div>
      </details>

      <div class="section panel">
        <div class="panel-header"><div class="panel-title">eBay Safe Tools</div></div>
        <div class="panel-body">
          <div class="btn-group">
            <button id="btn-sanitize" class="btn">Sanitize Entire Document</button>
            <button id="btn-remove-inline-scripts" class="btn">Strip Inline Event Handlers</button>
          </div>
          <small>Removes active content (scripts, iframes, forms, keyframes) and unsafe attributes; preserves layout.</small>
        </div>
      </div>

      <details class="section panel collapse" id="analyzer">
        <summary><div class="panel-title">SEO & Performance Analyzer</div></summary>
        <div class="panel-body">
          <div class="btn-group">
            <button id="btn-analyze" class="btn primary">Run Analysis</button>
          </div>
          <div class="form-grid">
            <div>
              <div class="score"><span>SEO Score</span><div class="bar"><div id="seo-bar"></div></div><span id="seo-score">0</span></div>
            </div>
            <div>
              <div class="score"><span>Speed Score</span><div class="bar"><div id="perf-bar"></div></div><span id="perf-score">0</span></div>
            </div>
          </div>
          <div class="section-title" style="margin-top:6px">Suggestions</div>
          <ul id="analysis-list"></ul>
        </div>
      </details>
    </aside>
    <div class="splitter" id="splitter" title="Drag to resize"></div>
    <main class="editor">
      <div class="editor-toolbar">
        <span id="status">No template loaded</span>
        <div class="editor-actions">
          <button id="btn-code" class="btn">View Code</button>
          <button id="btn-reset-zoom" class="btn">Reset Zoom</button>
          <label class="zoom">Zoom <input id="zoom-range" type="range" min="60" max="140" value="100"></label>
        </div>
      </div>
      <div class="frame-wrap">
        <iframe id="frame" title="Editor Preview"></iframe>
      </div>
    </main>
  </div>

  <dialog id="code-modal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <div class="title">Edited HTML</div>
        <button class="btn" id="btn-close-code">Close</button>
      </div>
      <textarea id="code-area" spellcheck="false"></textarea>
      <div class="row" style="justify-content:space-between;gap:8px;padding:8px 12px;">
        <label class="row" style="gap:6px"><input type="checkbox" id="code-live"> Live preview to code</label>
        <div class="row right">
          <button class="btn" id="btn-apply-code" title="Apply code to preview">Apply to Preview</button>
          <button class="btn" id="btn-copy-code">Copy</button>
        </div>
      </div>
    </div>
  </dialog>

  <script src="assets/editor.js"></script>
  <script>
    window.EditorApp && window.EditorApp.init();
  </script>
</body>
</html>


